!function(e){var t={id:"86c87c90",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){(function(){var n=this,i=n._,r={},a=Array.prototype,o=Object.prototype,s=Function.prototype,u=a.push,c=a.slice,l=a.concat,d=o.toString,h=o.hasOwnProperty,f=a.forEach,p=a.map,g=a.reduce,_=a.reduceRight,m=a.filter,v=a.every,x=a.some,w=a.indexOf,y=a.lastIndexOf,b=Array.isArray,F=Object.keys,$=s.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=k),e._=k):n._=k,k.VERSION="1.6.0";var S=k.each=k.forEach=function(e,t,n){if(null==e)return e;if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,a=e.length;a>i;i++)if(t.call(n,e[i],i,e)===r)return}else for(var o=k.keys(e),i=0,a=o.length;a>i;i++)if(t.call(n,e[o[i]],o[i],e)===r)return;return e};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(S(e,function(e,r,a){i.push(t.call(n,e,r,a))}),i)};var I="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),g&&e.reduce===g)return i&&(t=k.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(S(e,function(e,a,o){r?n=t.call(i,n,e,a,o):(n=e,r=!0)}),!r)throw new TypeError(I);return n},k.reduceRight=k.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),_&&e.reduceRight===_)return i&&(t=k.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var o=k.keys(e);a=o.length}if(S(e,function(s,u,c){u=o?o[--a]:--a,r?n=t.call(i,n,e[u],u,c):(n=e[u],r=!0)}),!r)throw new TypeError(I);return n},k.find=k.detect=function(e,t,n){var i;return T(e,function(e,r,a){return t.call(n,e,r,a)?(i=e,!0):void 0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(S(e,function(e,r,a){t.call(n,e,r,a)&&i.push(e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},k.every=k.all=function(e,t,n){t||(t=k.identity);var i=!0;return null==e?i:v&&e.every===v?e.every(t,n):(S(e,function(e,a,o){return(i=i&&t.call(n,e,a,o))?void 0:r}),!!i)};var T=k.some=k.any=function(e,t,n){t||(t=k.identity);var i=!1;return null==e?i:x&&e.some===x?e.some(t,n):(S(e,function(e,a,o){return i||(i=t.call(n,e,a,o))?r:void 0}),!!i)};k.contains=k.include=function(e,t){return null==e?!1:w&&e.indexOf===w?-1!=e.indexOf(t):T(e,function(e){return e===t})},k.invoke=function(e,t){var n=c.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){return(i?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matches(t))},k.findWhere=function(e,t){return k.find(e,k.matches(t))},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,r=-1/0;return S(e,function(e,a,o){var s=t?t.call(n,e,a,o):e;s>r&&(i=e,r=s)}),i},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,r=1/0;return S(e,function(e,a,o){var s=t?t.call(n,e,a,o):e;r>s&&(i=e,r=s)}),i},k.shuffle=function(e){var t,n=0,i=[];return S(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i},k.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))};var P=function(e){return null==e?k.identity:k.isFunction(e)?e:k.property(e)};k.sortBy=function(e,t,n){return t=P(t),k.pluck(k.map(e,function(e,i,r){return{value:e,index:i,criteria:t.call(n,e,i,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,i){var r={};return n=P(n),S(t,function(a,o){var s=n.call(i,a,o,t);e(r,s,a)}),r}};k.groupBy=A(function(e,t,n){k.has(e,t)?e[t].push(n):e[t]=[n]}),k.indexBy=A(function(e,t,n){e[t]=n}),k.countBy=A(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,i){n=P(n);for(var r=n.call(i,t),a=0,o=e.length;o>a;){var s=a+o>>>1;n.call(i,e[s])<r?a=s+1:o=s}return a},k.toArray=function(e){return e?k.isArray(e)?c.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:c.call(e,0,t)},k.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var E=function(e,t,n){return t&&k.every(e,k.isArray)?l.apply(n,e):(S(e,function(e){k.isArray(e)||k.isArguments(e)?t?u.apply(n,e):E(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return E(e,t,[])},k.without=function(e){return k.difference(e,c.call(arguments,1))},k.partition=function(e,t){var n=[],i=[];return S(e,function(e){(t(e)?n:i).push(e)}),[n,i]},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var r=n?k.map(e,n,i):e,a=[],o=[];return S(r,function(n,i){(t?i&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),a.push(e[i]))}),a},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=c.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.contains(t,e)})})},k.difference=function(e){var t=l.apply(a,c.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,a=new Array(i);i>r;)a[r++]=e,e+=n;return a};var B=function(){};k.bind=function(e,t){var n,i;if($&&e.bind===$)return $.apply(e,c.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(c.call(arguments)));B.prototype=e.prototype;var r=new B;B.prototype=null;var a=e.apply(r,n.concat(c.call(arguments)));return Object(a)===a?a:r}},k.partial=function(e){var t=c.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,a=i.length;a>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},k.bindAll=function(e){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(c.call(arguments,1)))},k.throttle=function(e,t,n){var i,r,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:k.now(),o=null,a=e.apply(i,r),i=r=null};return function(){var c=k.now();s||n.leading!==!1||(s=c);var l=t-(c-s);return i=this,r=arguments,0>=l?(clearTimeout(o),o=null,s=c,a=e.apply(i,r),i=r=null):o||n.trailing===!1||(o=setTimeout(u,l)),a}},k.debounce=function(e,t,n){var i,r,a,o,s,u=function(){var c=k.now()-o;t>c?i=setTimeout(u,t-c):(i=null,n||(s=e.apply(a,r),a=r=null))};return function(){a=this,r=arguments,o=k.now();var c=n&&!i;return i||(i=setTimeout(u,t)),c&&(s=e.apply(a,r),a=r=null),s}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return k.partial(t,e)},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=function(e){if(!k.isObject(e))return[];if(F)return F(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return S(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(a,c.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(a,c.call(arguments,1));for(var i in e)k.contains(n,i)||(t[i]=e[i]);return t},k.defaults=function(e){return S(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var C=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=d.call(e);if(r!=d.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return i[a]==t;var o=e.constructor,s=t.constructor;if(o!==s&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var u=0,c=!0;if("[object Array]"==r){if(u=e.length,c=u==t.length)for(;u--&&(c=C(e[u],t[u],n,i)););}else{for(var l in e)if(k.has(e,l)&&(u++,!(c=k.has(t,l)&&C(e[l],t[l],n,i))))break;if(c){for(l in t)if(k.has(t,l)&&!u--)break;c=!u}}return n.pop(),i.pop(),c};k.isEqual=function(e,t){return C(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=b||function(e){return"[object Array]"==d.call(e)},k.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==d.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return h.call(e,t)},k.noConflict=function(){return n._=i,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.property=function(e){return function(t){return t[e]}},k.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},k.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};L.unescape=k.invert(L.escape);var q={escape:new RegExp("["+k.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(L.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(q[e],function(t){return L[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){S(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),j.call(this,n.apply(k,e))}})};var M=0;k.uniqueId=function(e){var t=++M+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(r,function(t,n,i,r,s){return o+=e.slice(a,s).replace(D,function(e){return"\\"+R[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=s+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(t)return i(t,k);var u=function(e){return i.call(this,e,k)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},k.chain=function(e){return k(e).chain()};var j=function(e){return this._chain?k(e).chain():e};k.mixin(k),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),S(["concat","join","slice"],function(e){var t=a[e];k.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k}),window._=k}).call(this)}(t.exports,t,e);e.__modules__["86c87c90"]=t.exports}(this),function(e){var t={id:"86c8cab0",exports:{}};e.__modules__||(e.__modules__={});!function(){Handlebars.registerHelper("range",function(e,t){for(var n="",i=0;e>i;i++)n+=t.fn();return n}),Handlebars.registerHelper("equal",function(e,t,n){return e==t?n.fn(this):n.inverse(this)})}(t.exports,t,e);e.__modules__["86c8cab0"]=t.exports}(this),function(e){var t={id:"86c8cab1",exports:{}};e.__modules__||(e.__modules__={});!function(){!function(e){var t=function(e,t){var n,i=this;n=e&&_.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},_.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&_.extend(n.prototype,e),_.extend(n.prototype,{"super":i.prototype}),n},n=function(e){e||(e={});for(var t={},n={},i=this.super,r={},a={};i;)_.extend(n,i.config),_.extend(a,i.listeners),i=i.super;_.extend(t,n,this.config),_.extend(r,a,this.listeners,e.listeners);var o=_.keys(t);t=_.defaults(_.pick(e,o),t),e=_.omit(e,o),e.config=t,e.listeners=r,this.options=e,this.initial.call(this,e)};_.extend(n.prototype,{fid:0,config:{},events:{},listeners:{},initial:function(){},set:function(e,t){if(_.isObject(e)&&!t)for(var n in e)e.hasOwnProperty(n)&&this.set(n,e[n]);else if(_.isString(e)){var i,r,a=_.result(this.options,"config");"undefined"!=typeof a[e]&&(_.isFunction(t)&&(t=t.call(null)),r=a[e],this.options.config[e]=t,i=this.options.listeners[e+"Changed"]||this.events[e+"changed"],_.isFunction(i)&&!1===i.apply(this,[t,r])&&(this.options.config[e]=r))}},get:function(e){var t=this.options.config[e];_.isFunction(t)&&(t=t.call(this));var n=this.options.listeners[e+"Get"];return _.isFunction(n)?n.call(this,t):t},trigger:function(e,t){e=this.options.listeners[e],_.isFunction(e)&&e.apply(this,t)}}),n.extend=t,e.FClass=e.F=n,e.log=console.log}(window)}(t.exports,t,e);e.__modules__["86c8cab1"]=t.exports}(this),function(e){var t={id:"86c8f1c0",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){var n=/^(\S+)\s*(.*)$/;window.Fui=t.exports=FClass.extend({el:null,$el:null,tagName:"div",config:null,model:null,collection:null,attributes:null,css:null,className:null,events:{},initialize:function(){},initial:function(e){this.cid=_.uniqueId("fui"),_.extend(this.events,e.events||{}),_.extend(this,_.omit(e,["events"])),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},render:function(){},callParent:function(e){_.isString(e)||(e="render");var t=this.super[e];return _.isFunction(t)&&(t=t.call(this)),t},show:function(){this.$el.show()},hide:function(){this.$el.hide()},refresh:null,remove:function(){return this.$el.remove(),this.stopListening(),this.onRemove(),this},onRemove:function(){},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(e){if(!e&&!(e=_.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(_.isFunction(i)||(i=this[e[t]]),i){var r=t.match(n),a=r[1],o=r[2];i=_.bind(i,this),a+=".delegateEvents"+this.cid,""===o?this.$el.on(a,i):this.$el.on(a,o,i)}}return this},setElement:function(e,t){this.$el&&this.undelegateEvents(),this.$el=e instanceof $?e:$(e),this.el=this.$el[0];var n=_.extend({},_.result(this,"attributes")),i=_.extend({},_.result(this,"css"));this.id&&(n.id=_.result(this,"id"));var r=_.result(this,"className");return _.isFunction(r)&&(r=r.apply(this)),_.isArray(r)&&(r=r.join(" ")),this.$el.attr(n).css(i).addClass(r),t!==!1&&this.delegateEvents(),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var e=$("<"+_.result(this,"tagName")+">");this.setElement(e,!1)}},stopListening:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;n||"object"!=typeof t||(n=this),e&&((i={})[e._listenId]=e);for(var a in i)e=i[a],e.off(t,n,this),(r||_.isEmpty(e._events))&&delete this._listeningTo[a];return this}},{emptyFunc:function(){},deviceType:function(){var e=this.WIN_W;return 640>e?1:960>e?2:1280>e?3:4},getLocationParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},isM:function(){return 1==this.deviceType()},WIN_W:$(window).width(),WIN_H:$(window).height(),SCROLL_TOP:function(){return $(document).scrollTop()},Msg:function(e,t){t=t||"info",console.log("["+t+"] "+e)}})}(t.exports,t,e);e.__modules__["86c8f1c0"]=t.exports}(this),function(e){var t={id:"86ca9f70",exports:{}};e.__modules__||(e.__modules__={});!function(){var e={ua:navigator.userAgent,andrioid_version:100,isAndroid:!1,init:function(){this.OS=this.searchString(this.dataOS())||"an unknown OS",this.Browser=this.searchBrowser(this.dataB()),this.mobile="iPhone"==this.OS||"iPad"==this.OS||"Android"==this.OS||"Winphone"==this.OS?!0:!1,/Android (\d+\.\d+)/.test(navigator.userAgent)&&(this.andrioid_version=RegExp.$1,this.isAndroid=!0)},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string;if(n&&-1!=n.indexOf(e[t].forSearch))return e[t].forShow}},searchBrowser:function(e){for(var t="",n=0;n<e.length;n++){var i=e[n].string;i&&-1!=i.indexOf(e[n].forSearch)&&(t+=e[n].forShow+"|")}return t},dataOS:function(){return[{string:navigator.platform,forSearch:"Win",forShow:"Windows"},{string:navigator.platform,forSearch:"Mac",forShow:"Mac"},{string:this.ua,forSearch:"iPhone",forShow:"iPhone"},{string:this.ua,forSearch:"iPad",forShow:"iPad"},{string:this.ua,forSearch:"Android",forShow:"Android"},{string:this.ua,forSearch:"Windows Phone",forShow:"Winphone"}]},dataB:function(){return[{string:this.ua,forSearch:"360browser",forShow:"360"},{string:this.ua,forSearch:"Maxthon",forShow:"Maxthon"},{string:this.ua,forSearch:"UCBrowser",forShow:"uc"},{string:this.ua,forSearch:"Oupeng",forShow:"opera"},{string:this.ua,forSearch:"Opera",forShow:"opera"},{string:this.ua,forSearch:"Sogou",forShow:"sogou"},{string:this.ua,forSearch:"baidu",forShow:"baidu"},{string:this.ua,forSearch:"Safari",forShow:"safari"},{string:this.ua,forSearch:"MicroMessenger",forShow:"weixin"},{string:this.ua,forSearch:"QQ/",forShow:"qq"},{string:this.ua,forSearch:"Weibo",forShow:"weibo"},{string:this.ua,forSearch:"MQBrowser",forShow:"360"},{string:this.ua,forSearch:"MQQBrowser",forShow:"qqbrowser"},{string:this.ua,forSearch:"CriOS",forShow:"Maxthon"}]}};e.init(),Fui.client=e}(t.exports,t,e);e.__modules__["86ca9f70"]=t.exports}(this),function(e){var t={id:"86ce7000",exports:{}};e.__modules__||(e.__modules__={});!function(){var e=Fui.Event=function(e){this.options=_.defaults(e,{}),this.easingX=new Fui.Easing,this.easingY=new Fui.Easing,this.bindEvents()};e.prototype={_event_start:!1,_event_start_p:{x:0,y:0,ts:0},_event_cur_p:{x:0,y:0,ts:0},_event_cur_dis:{x:0,y:0},_event_del_p:{x:0,y:0,ts:0},_event_cur_speed:{x:0,y:0},gesture:null,startGesture:null,max:{x:0,y:0},min:{x:0,y:0},unbindEvents:function(){var e=this.options.hoster;e.$el.undelegate("."+e.cid),delete this},getAngle:function(e,t){var n=180*Math.atan(Math.abs(t/e))/Math.PI;return 0>e&&(n=180-n),t>0&&(n=-n),n},getCurAngle:function(){var e,t=this,n=t._event_del_p;return e=180*Math.atan(-n.y/n.x)/Math.PI,n.x<0&&(e+=90),e},getTrans:function(e){var t=getComputedStyle(e[0],null).webkitTransform;if(!/^matrix/.test(t))return 0;var n=/matrix\(([\d\,\.\-\s]*)\)/g.exec(t)[1];return n=n.split(","),{x:n[4]<<0,y:n[5]<<0}},checkOrientGesture:function(e){return"x"==e&&/^left|right/.test(this.startGesture)||"y"==e&&/^up|down/.test(this.startGesture)},bindEvents:function(){function e(){d._event_cur_speed={x:0,y:0},d._event_cur_dis={x:0,y:0}}function t(t){d.$e=t;var n=t.originalEvent.touches?t.originalEvent.touches[0]:t.originalEvent;d._event_start=!0,r=d._event_start_p=d._event_cur_p=s=o={x:n.clientX,y:n.clientY,ts:Date.now()},e(),g=!0,d.gesture=null,d.startGesture=null,_.isFunction(h._onstart)&&h._onstart(t),h.trigger("touchstart",[d])}function n(e){d.$e=e;var t=e.originalEvent.touches?e.originalEvent.touches[0]:e.originalEvent;g&&(m=!0),a=d._event_cur_p={x:t.clientX,y:t.clientY,ts:Date.now()},s=o,o=a;var n=d._event_cur_dis={x:a.x-r.x,y:a.y-r.y};if(null==d.startGesture&&(Math.abs(n.x)>10||Math.abs(n.y)>10)){var i=d.getAngle(n.x,n.y),f=d._event_cur_speed;Math.abs(i)<=30||Math.abs(i)>=150?(f.x>0&&(d.startGesture="rightSwipe"),f.x<0&&(d.startGesture="leftSwipe")):(f.y>0&&(d.startGesture="downSwipe"),f.y<0&&(d.startGesture="upSwipe"))}o.ts-s.ts>5&&(u=o.x-s.x,c=o.y-s.y,l=o.ts-s.ts,d._event_del_p={x:u,y:c,ts:l},d._event_cur_speed={x:u/l,y:c/l},_.isFunction(h._onmove)&&h._onmove(e),h.trigger("touchmove",[d]))}function i(t){d.$e=t;var n=d._event_cur_dis.x,i=d._event_cur_dis.y,r=(d.gesture,f.height()),a=f.width();if(Math.abs(n)>10||Math.abs(i)>10){var o=d.getAngle(n,i),s=d._event_cur_speed;Math.abs(o)<=30||Math.abs(o)>=150?(Math.abs(s.x)>.5||Math.abs(n)>a/2)&&(s.x>0&&(d.gesture="rightSwipe"),s.x<0&&(d.gesture="leftSwipe")):(Math.abs(s.y)>.5||Math.abs(i)>r/2)&&(s.y>0&&(d.gesture="downSwipe"),s.y<0&&(d.gesture="upSwipe"))}else d.gesture="tap",g&&!m&&("input"==t.target.tagName.toLowerCase()?t.target.focus():_.isFunction(h._ontap)&&h._ontap(t));_.isFunction(h.onGesture)&&h.onGesture(d.gesture,$(t.target),t),_.isFunction(h._onend)&&h._onend(t),h.trigger("touchend",[d]),g=!1,m=!1,e()}var r,a,o,s,u,c,l,d=this,h=this.options.hoster,f=h.$el,p=h.cid,g=!1,m=!1,v=!1;f.on("touchstart."+p,t).on("touchmove."+p,n).on("touchend."+p,i).on("mousedown."+p,function(e){v=!0,t(e)}).on("mousemove."+p,function(e){v&&n(e)}).on("mouseup."+p,function(e){v&&(i(e),v=!1)}).on("mouseout."+p,function(e){v&&(i(e),v=!1)})}}}(t.exports,t,e);e.__modules__["86ce7000"]=t.exports}(this),function(e){var t={id:"86cff6a0",exports:{}};e.__modules__||(e.__modules__={});!function(){!function(){var e,t,n=0,i=["ms","moz","webkit","o"],r=i.length;for(e=0;r>e&&!window.requestAnimationFrame;++e)t=i[e],window.requestAnimationFrame=window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];Fui.performance={},Fui.performance.now=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},window.requestAnimationFrame=function(e,t){var i=Date.now(),r=Math.max(0,16-(i-n)),a=window.setTimeout(function(){e.call(t)},0);return n=i+r,a},window.requestAnimationFrame&&(Fui.trueRequestAnimationFrames=!0),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Fui.AnimationQueue=FClass.extend({config:{queue:[],status:"stop",ts:0},push:function(){this.get("queue").push(arguments)},start:function(){this.set("status","start"),this.clear(),this.set("ts",Date.now()),this.doStart()},run:function(){var e=this,t=this.get("queue").shift();t&&(t[0].apply(t[1],t[2]),e.set("ts",Date.now())),e.doIterator()},doIterator:function(){this.animationId=requestAnimationFrame(this.run,this)},doStart:function(){this.animationId=requestAnimationFrame(this.run,this)},stop:function(){cancelAnimationFrame(this.animationId)},clear:function(){this.get("queue").length=0}})}(t.exports,t,e);e.__modules__["86cff6a0"]=t.exports}(this),function(e){var t={id:"86d092e0",exports:{}};e.__modules__||(e.__modules__={});!function(){Fui.Easing=FClass.extend({getTrans:function(e){var t=getComputedStyle(e[0],null).webkitTransform;if(!/^matrix/.test(t))return 0;var n=/matrix\(([\d\,\.\-\s]*)\)/g.exec(t)[1];return n=n.split(","),{x:n[4]<<0,y:n[5]<<0}},init:function(e,t,n){var i=n.$ele;if(this.friction=.5,this.acceleration=30,this.theta=Math.log(1-this.friction/10),this.alpha=this.theta/this.acceleration,e&&(this.startTime=Date.now(),this.startSpeed=e._event_cur_speed[t]*this.acceleration,this.startPos=this.getTrans(i)[t],this.maxV=n.max[t],this.minV=n.min[t]),this.outBound=this.startPos>this.maxV||this.startPos<this.minV,this.ended=!1,this.bounceBack=!1,this.lastValue=null,this.bounceInitValue="undefined"==typeof this.bounceInitValue?0:this.bounceInitValue,this.outBound){var r=null;this.startPos>this.maxV&&(r="max"),this.startPos<this.minV&&(r="min"),this.setBounce(Date.now(),("max"==r?this.maxV:this.minV)+this.bounceInitValue,0,!0)}},getValue:function(){var e=this.startSpeed,t=Math.exp((Date.now()-this.startTime)*this.alpha),n=this.startPos-e*(1-t)/this.theta,i=t*e;if(0==e)return this.ended=!0,this.startPos;if(this.direction=e>0?1:-1,!this.outBound){if(Math.abs(i)<1&&(this.ended=!0),n<=this.maxV&&n>=this.minV)return n;this.outBound=!0,this.setBounce(Date.now(),i>0?this.maxV:this.minV,i)}if(n=Math.round(this.getBounceValue()),!this.ended)if(this.bounceBack){if(Math.round(n)==this.bounceStartValue)return this.ended=!0,n}else null!=this.lastValue&&(1==this.direction&&n<this.lastValue||-1==this.direction&&n>this.lastValue)&&(this.bounceBack=!0);return this.lastValue=n,n},setBounce:function(e,t,n,i){this.bounceStartTime=e,this.bounceStartValue=t,this.bounceStartVelocity=n,this.bounceBack=!1,this.bounceTT=i},getBounceValue:function(){if(!this.bounceTT){var e=Date.now()-this.bounceStartTime,t=e/30,n=t*Math.pow(Math.E,-.3*t);return this.bounceStartValue+this.bounceStartVelocity*n}if(this.bounceTT){var i=1.2*(Date.now()-this.startTime)/300;return i>=1&&(i=1),this.startPos+(this.bounceStartValue-this.startPos)*i}}})}(t.exports,t,e);e.__modules__["86d092e0"]=t.exports}(this),function(e){var t={id:"86d17d40",exports:{}};e.__modules__||(e.__modules__={});!function(){Fui.ScrollBar=Fui.extend({className:function(){return["fui-scrollbar","fui-scrollbar-"+this.get("orient")]},config:{orient:"y"},initialize:function(){var e=this,t=e.$el;t.append('<div class="fui-scrollbar-inner"></div>')}}),Fui.Scrollable=Fui.extend({config:{orient:"y"},touched:!1,_pre_dis:0,initialize:function(e){{var t=this,n=t.get("orient"),i=t.$el=e.$el,r=t.$ele=i.children().first();t.event=new Fui.Event({hoster:t}),t.aq=new Fui.AnimationQueue({})}i.css({position:"relative"}).addClass("fui-scrollable"),t._doTrans(r,0,!1);var a=null,o=null;"y"!=n&&(a=new Fui.ScrollBar({orient:"x"}),i.append(a.$el)),"x"!=n&&(o=new Fui.ScrollBar({orient:"y"}),i.append(o.$el))},scrollingFn:function(e){this._doTrans(this.$ele,this._pre_dis+e._event_cur_dis[this.get("orient")],!1)},_doTrans:function(e,t,n){function i(e){return/^[\+|\-]{1}$/.test(e)?e=parseInt(e+a.pageSize[r])+"px":/\%$/.test(e)||(e=parseInt(e)+"px"),["translate3d("+("x"==r?e:"0px"),"y"==r?e:"0px","0px) scale(1) rotate(0deg) skew(0deg,0deg)"].join(",")}var r=this.get("orient"),a=this;"undefined"==typeof n&&(n=!0),e&&1==e.length&&e.css({display:"block",zoom:1,webkitTransform:i(t),webkitTransition:n?"-webkit-transform .4s":"none"})},requestAniFrame:function(e){var t={x:0,y:0};"y"!=this.orient?t.x=e.easingX.getValue():e.easingX.ended=!0,"x"!=this.orient?t.y=e.easingY.getValue():e.easingY.ended=!0,this._doTrans(this.$ele,t[this.get("orient")],!1)},easing:function(e){e.easingX.init(e,"x",this),e.easingY.init(e,"y",this);var t=this,n=requestAnimationFrame(function(){cancelAnimationFrame(n),t.touched||(t.aq.push(t.requestAniFrame,t,[e]),e.easingX.ended&&e.easingY.ended||(n=requestAnimationFrame(arguments.callee)))})},listeners:{touchstart:function(e){var t=this;this.touched=!0,t.max={x:0,y:0},t.min={x:0,y:t.$el.height()-t.$ele.height()},this._pre_dis=e.getTrans(this.$ele)[this.get("orient")],this.aq.start()},touchmove:function(e){e.checkOrientGesture(this.get("orient"))&&this.aq.push(this.scrollingFn,this,[e])},touchend:function(e){this.touched=!1,e.checkOrientGesture(this.get("orient"))&&this.easing(e)}}})}(t.exports,t,e);e.__modules__["86d17d40"]=t.exports}(this),function(e){var t={id:"86c85580",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){n.__modules__["86c87c90"],n.__modules__["86c8cab0"],n.__modules__["86c8cab1"],n.__modules__["86c8f1c0"],n.__modules__["86ca9f70"],n.__modules__["86ce7000"],n.__modules__["86cff6a0"],n.__modules__["86d092e0"],n.__modules__["86d17d40"]}(t.exports,t,e);e.__modules__["86c85580"]=t.exports}(this),function(e){var t={id:"86d1f270",exports:{}};e.__modules__||(e.__modules__={});!function(){var e=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!e)throw Error("No createObjectURL function found to create blob url");Fui.Template=Fui.extend({className:function(){return["module","module-"+this.get("type"),this.get("cls")]},config:{type:null,cls:"",tpl:null,xtpl:null,pageIndex:0,bg:null},propsForm:null,save:function(){},getImgPath:function(e){return e},design:null,initialize:function(){var e=this,t=e.$el,n=e.get("bg");this.renderBg(n),this.addTpl(),this.addXtpl(),_.isFunction(this.design)&&this.design();var i=t.find("[data-scrollable]").first();i.length>0&&new Fui.Scrollable({$el:i})},loadResources:function(e){function t(){a==o.length&&e()}var n=this,i=n.$el,r=i.find("[data-src]"),a=0,o=[];i.attr("data-src")&&o.push(i[0]),_.each(r,function(e){o.push(e)}),0==o.length&&e(),_.each(o,function(e){var n=$(e);if(1==n.length){var i=new Image;i.src=n.attr("data-src"),n.attr("data-src",null),i.onload=function(){a++,"img"==n[0].tagName.toLowerCase()?n.attr("src",this.src):n.css("backgroundImage","url("+this.src+")"),t()},i.onerror=function(){a++,t()}}else t()})},renderBg:function(e){e&&this.$el.attr("data-src",this.getImgPath(e))},clearBg:function(){this.$el.css({backgroundImage:"none"})},onFocus:function(){},onBlur:function(){},getTplData:function(){return{pageIndex:this.get("pageIndex")}},onGesture:function(){},checkSize:function(){return!0},validateInfo:function(e,t){var n=!0;return _.each(t,function(t){e.hasOwnProperty(t)||(error("Module must contain a ["+t+"] on [name: "+e.label+",label:"+e.name+"]"),n=!1)
}),n},getXtplData:null,addXtpl:function(){var e=this,t=e.get("xtpl");if(!t)return!1;var n=$("#"+t).html(),i={IMG_DIR:Fui.Template.IMG_DIR};_.isFunction(e.getXtplData)&&_.extend(i,e.getXtplData()),e.$el.append(Handlebars.compile(n)(i))},addTpl:function(){var e=this.get("tpl")||"";this.$el.append(Handlebars.compile(e)(this.getTplData()))},getData:function(){return _.extend({},{template:this.get("template")},this.getForm().getData())},form:null,getForm:function(){var e=this.get("pageIndex")+1;return this.form||(this.form=new Fui.Form({size:"normal",title:(1==e?"首":"第 "+e+" ")+"页属性",items:this.getFormItems()})),this.form},getFormItems:Fui.emptyFunc,getGestureItems:function(){return[]},getText:function(e){return this.validateInfo(e,["name","label","placeHolder"])?(e.type="text",e):void 0},getSelection:function(e){e.$el;if(this.validateInfo(e,["name","label","change","data"]))return e.type="select",e},getImagePicker:function(e){return this.getImage(e)},getImageListPicker:function(t){var n=this;if(this.validateInfo(t,["name","change"]))return{type:"image-list",name:t.name,listeners:{change:function(i,r){var a=i.target.files[0],o=e.createObjectURL(a),s=new Image;s.src=o,s.onload=function(){var e=this.naturalWidth,a=this.naturalHeight;return n.checkSize(e,a)?void t.change.call(s,i,r):void error("Image size must be 640 X 1010")}}}}},getImage:function(e){if(this.validateInfo(e,["name","label","change"])){return e.type="image",e}}},{IMG_DIR:""})}(t.exports,t,e);e.__modules__["86d1f270"]=t.exports}(this),function(e){var t={id:"86d41550",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){t.exports='{{#if fg}}<div class="base-foreground"></div>{{/if}}'}(t.exports,t,e);e.__modules__["86d41550"]=t.exports}(this),function(e){var t={id:"86d2dcd0",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){Fui.Template.Base=Fui.Template.extend({config:{type:"base",tpl:n.__modules__["86d41550"],fg:null},listeners:{fgChanged:function(e){this.renderFg(e)}},save:function(e){function t(){r++,2==r&&e(!0,n)}var n=this,i=this.getForm().getData(),r=0;_.each(i,function(i,r){new Fui.FileUpload({file:i,name:r,listeners:{end:function(e,i){n.getForm().setData(i,e),t()},error:function(){e(!1)}}})})},render:function(){var e=this,t=e.get("fg");this.renderFg(t)},getTplData:function(){return{pageIndex:this.get("pageIndex"),fg:this.get("fg")}},renderFg:function(e){e&&this.$el.children(".base-foreground").css({backgroundImage:"url("+this.getImgPath(e)+")"})},clearFg:function(){this.$el.children(".base-foreground").css({backgroundImage:"none"})},getFormItems:function(){{var e=this;e.$el}return[{type:"ImagePicker",$el:this.$el,label:"背景图片：",name:"bg",listeners:{change:function(t){e.renderBg(t)},clear:function(){e.clearBg()}}},{type:"ImagePicker",$el:this.$el,label:"前景图片：",name:"fg",listeners:{change:function(t){e.renderFg(t)},clear:function(){e.clearFg()}}}]}})}(t.exports,t,e);e.__modules__["86d2dcd0"]=t.exports}(this),function(e){var t={id:"86d6d470",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){t.exports='<div class="video-play {{playIconCls}}">    {{#equal playIconCls \'default\'}}    <a data-tap="page-{{pageIndex}}-video-play" class="play-icon icon icon-play3 white"></a>    {{else}}    <a data-tap="page-{{pageIndex}}-video-play" class="play-icon white"></a>    {{/equal}}    <div class="play-bg"></div></div><div class="video-pack">    <a data-tap="page-{{pageIndex}}-video-close" class="close"></a>    <div id="page-{{pageIndex}}-video-player" class="i">    </div></div>'}(t.exports,t,e);e.__modules__["86d6d470"]=t.exports}(this),function(e){var t={id:"86d41551",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){Fui.Template.Video=Fui.Template.extend({config:{type:"video",tpl:n.__modules__["86d6d470"],videoPackCss:null,playBtnCss:null,closeBtnCss:null,playIconCls:"default",platform:null,clientId:"3e9659d488a5a018",vid:null,width:640,whRatio:16/9},listeners:{play:function(){function e(){"undefined"!=typeof YKU&&(t.player=new YKU.Player("page-"+t.get("pageIndex")+"-video-player",{styleid:"0",client_id:t.get("clientId"),vid:t.get("vid"),autoplay:!0,show_related:!1,events:{onPlayerReady:function(){},onPlayStart:function(){},onPlayEnd:function(){t.player=null,console.log("close video"),t.trigger("close")}}}),setTimeout(function(){try{t.player.playVideo()}catch(e){}},10))}var t=this,n=t.get("platform");switch(this.$videoPack.addClass("show"),n){case"youku":e()}},close:function(){var e=this,t=e.get("platform");this.$videoPack.removeClass("show");try{switch(t){case"youku":e.player.pauseVideo()}}catch(n){}}},getTplData:function(){return{pageIndex:this.get("pageIndex"),playIconCls:this.get("playIconCls")}},render:function(){var e=this,t=e.$videoPack=e.$el.children(".video-pack"),n=t.children(".i");t.css(e.get("videoPackCss")||{}),e.$el.find(".video-pack>.close").css(e.get("closeBtnCss")||{}),e.$el.find(".play-icon").css(e.get("playBtnCss")||{}),n.css({width:e.get("width"),height:e.get("width")/e.get("whRatio")})},getGestureItems:function(){var e=this;return[{gesture:"tap",name:"page-"+e.get("pageIndex")+"-video-play",callback:function(){e.trigger("play")},caller:e},{gesture:"tap",name:"page-"+e.get("pageIndex")+"-video-close",callback:function(){e.trigger("close")},caller:e}]},save:function(e){var t=this,n=t.getForm(),i=t.getData();new Fui.FileUpload({file:i.bg,name:"bg",listeners:{end:function(t,i){console.log(arguments),n.setData(i,t),e(!0)},error:function(){e(!1)}}})},getFormItems:function(){var e=this,t=this.$el;return[{type:"ImagePicker",label:"背景：",name:"bg",listeners:{change:function(e){t.css({backgroundImage:"url("+e+")"})},clear:function(){e.clearBg()}}},{type:"Select",label:"播放按钮样式：",data:[{text:"样式一",value:0,checked:!0},{text:"样式二",value:1},{text:"样式三",value:2}],name:"playIconStyle",listeners:{change:function(){}}},{type:"Select",label:"播放平台",name:"platform",data:[{text:"优酷",value:"youku",checked:!0},{text:"腾讯",value:"qq"}],listeners:{change:function(t){e.set("platform",t)}}},{type:"Text",label:"视频ID",name:"vid",placeHolder:"优酷视频的ID(vid)",listeners:{change:function(t){e.set("vid",t)}}}]}})}(t.exports,t,e);e.__modules__["86d41551"]=t.exports}(this),function(e){var t={id:"86d8a930",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){t.exports='<a class="photos-arrow photos-l-arrow"></a><a class="photos-arrow photos-r-arrow"></a><div class="photos-pack">    {{#each imgList}}        <img class="normal" data-tap="page-{{../pageIndex}}-photos" data-leftSwipe="page-{{../pageIndex}}-photos-item" data-rightSwipe="page-{{../pageIndex}}-photos-item" data-src="{{src}}"/>    {{/each}}</div>        {{#if withDesc}}<div class="desc-pack">    {{#each imgList}}    <div class="item">        <h4>{{title}}</h4>        <p data-desc-index="page-{{../pageIndex}}-desc-item-{{@index}}">            {{desc}}        </p>    </div>    {{/each}}</div>        {{/if}}'}(t.exports,t,e);e.__modules__["86d8a930"]=t.exports}(this),function(e){var t={id:"86d6fb80",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){Fui.Template.Photos=Fui.Template.extend({config:{type:"photos",tpl:n.__modules__["86d8a930"],data:null,withDesc:!0,index:0},onPopFlag:!0,render:function(){{var e=this,t=e.$el;e.$pack=t.children(".photos-pack"),e.get("data")||[]}if(e.get("withDesc")){var n=e.$descPack=t.children(".desc-pack");n.children().last().show().siblings().hide()}this.ensureTop3Rotate()},save:function(e){function t(){2==++a&&e(!0)}var n=this,i=n.getForm(),r=i.getData(),a=0;_.each(r,function(n,r){new Fui.FileUpload({file:n,name:r,listeners:{end:function(e,n){i.setData(n,e),t()},error:function(){e(!1)}}})})},onFocus:function(){var e=this;e.$pack.addClass("focus").one("webkitTransitionEnd",function(){e.$el.addClass("ani")})},onBlur:function(){this.$pack.removeClass("focus"),this.$el.removeClass("ani")},ensureTop3Rotate:function(){var e=this.$pack.children("img"),t=e.last();e.removeClass("pre1 pre2"),t.addClass("pre1").prev().addClass("pre2")},getTplData:function(){var e=this,t=e.get("data");return _.isFunction(t)&&(t=t.call(e),e.set("data",t)),{pageIndex:e.get("pageIndex"),imgList:t,withDesc:e.get("withDesc")}},pop:function(e){var t=this,n=t.$pack,i=n.children();if(t.onPopFlag){t.onPopFlag=!1;var r=i.last();if(r.addClass(e).one("webkitTransitionEnd",function(){n.prepend(r.removeClass(e)),t.ensureTop3Rotate(),t.onPopFlag=!0}),t.get("withDesc")){var a=t.$descPack.children();t.$descPack.addClass("hide").one("webkitTransitionEnd",function(){t.$descPack.prepend(a.last()),t.$descPack.children().last().show().siblings().hide(),t.$descPack.removeClass("hide")})}}},getGestureItems:function(){var e=this,t=e.get("pageIndex"),n=["page",t,"photos","item"].join("-");return[{gesture:"tap",name:["page",t,"photos"].join("-"),callback:function(){e.$descPack.toggleClass("invisible")}},{gesture:"leftSwipe",name:n,callback:function(){e.pop("afterL")}},{gesture:"rightSwipe",name:n,callback:function(){e.pop("afterR")}}]},addImg:function(e,t){var n=this,i=n.$pack.children("img").eq(t);i.length>0?i.attr("src",e):n.$pack.append(Handlebars.compile('<img class="normal" data-form-image-list-item="{{index}}" data-leftSwipe="page-{{pageIndex}}-photos-item" data-rightSwipe="page-{{pageIndex}}-photos-item" src="{{src}}"/>')({index:t,src:e,pageIndex:n.get("pageIndex")})),this.ensureTop3Rotate()},removeImg:function(e){this.$pack.children("[data-form-image-list-item="+e+"]").remove(),this.ensureTop3Rotate()},getFormItems:function(){{var e=this;e.$pack}return[{type:"ImagePicker",name:"bg",label:"背景图片：",listeners:{change:function(t){e.renderBg(t)},clear:function(){e.clearBg()}}},{type:"ImageListPicker",name:"data",listeners:{change:function(t,n){e.addImg(t,n)},itemRemove:function(t){e.removeImg(t)}}}]}})}(t.exports,t,e);e.__modules__["86d6fb80"]=t.exports}(this),function(e){var t={id:"86d1cb60",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){n.__modules__["86d1f270"],n.__modules__["86d2dcd0"],n.__modules__["86d41551"],n.__modules__["86d6fb80"]}(t.exports,t,e);e.__modules__["86d1cb60"]=t.exports}(this),function(e){var t={id:"86d91e60",exports:{}};e.__modules__||(e.__modules__={});!function(e,t){t.exports='<div class="video-pack" data-tap="popup-close">    <a data-tap="popup-close" class="close"></a>    <div id="popup-video-player" class="i">    </div></div>'}(t.exports,t,e);e.__modules__["86d91e60"]=t.exports}(this),function(e){var t={id:"86d8d040",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){Fui.Popup=Fui.extend({className:function(){return["fui-popup",this.get("theme"),"hide"]},config:{theme:null,form:null,type:"scale",videoTpl:n.__modules__["86d91e60"],width:640,whRatio:16/9},initialize:function(){var e=this,t=e.get("type");e.$el.addClass(t),e.$el.attr("data-tap","popup-close"),this.event=new Fui.Event({hoster:e})},_ontap:function(e){var t=$(e.target).attr("data-tap");"popup-close"==t&&this.hide()},form:function(e){this.$el.append(e.$el),this.show()},img:function(e){var t=this,n=this.$el,i=new Image;i.src=e,i.onload=function(){n.append('<img data-tap="popup-close" src="'+e+'"/>'),t.show()}},video:function(e,t){function n(){"undefined"!=typeof YKU&&(i.player=new YKU.Player("popup-video-player",{styleid:"0",client_id:t.clientId||"3e9659d488a5a018",vid:t.vid,autoplay:!0,show_related:!1,events:{onPlayerReady:function(){},onPlayStart:function(){},onPlayEnd:function(){i.player=null,i.hide()}}}),setTimeout(function(){try{i.player.playVideo()}catch(e){}},10))}var i=this,r=i.$el;r.append(i.get("videoTpl"));var a=r.find(".i");switch(a.css({width:i.get("width"),height:i.get("width")/i.get("whRatio")}),e){case"youku":n();break;case"letv":}i.show()},show:function(){var e=this.$el;e.removeClass("hide"),$("body").append(e),setTimeout(function(){e.addClass("show")},1)},hide:function(){var e=this.$el,t=this;e.removeClass("show"),setTimeout(function(){t.remove()},500)}})}(t.exports,t,e);e.__modules__["86d8d040"]=t.exports}(this),function(e){var t={id:"86e0bf80",exports:{}};e.__modules__||(e.__modules__={});!function(){Fui.Arrow=Fui.extend({tagName:"a",config:{orient:"bottom",color:"white",style:{}},initialize:function(){var e=this,t=e.get("orient"),n={position:"absolute",zIndex:1030,border:"2px solid "+e.get("color"),borderRight:0,borderBottom:0,width:36,height:36,webkitAnimation:e.get("orient")+"Arrow 2s linear infinite"},i={};switch(t){case"top":i={left:"50%",top:30,marginLeft:-18};break;case"left":i={top:"50%",left:30,marginTop:-18};break;case"right":i={top:"50%",right:30,marginTop:-18};break;case"bottom":i={left:"50%",bottom:30,marginLeft:-18}}_.extend(n,i,e.get("style")),this.$el.css(n)}})}(t.exports,t,e);e.__modules__["86e0bf80"]=t.exports}(this),function(e){var t={id:"86d94571",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){n.__modules__["86e0bf80"],Fui.PageSlider=Fui.Template.extend({className:function(){var e=this,t=e.get("orient");return["fui-pageSlider",t]},config:{slideType:null,pageNum:0,prePage:-1,curPage:0,nextPage:0,lock:!1,data:null,toggleCls:"focus",arrow:"bottom",orient:"y"},pageSize:{x:640,y:1008},data:null,_slide_flag:!1,getPage:function(e){return this.get("data")[e]},getImgPath:function(e){return e},render:function(){function e(t){r[t]&&(s=Fui.performance.now(),r[t].loadResources(function(){e(++t)}))}var t=this,n=t.$el,i=t.$ul=$('<div class="c"></div>');n.append(i),t.pageSize.y=n.height(),t.pageSize.x=n.width(),this.event=new Fui.Event({hoster:this});var r=this.get("data");_.isArray(r)?(_.each(r,function(e,n){var i=Fui.Template[e.template];if(_.isFunction(i)){var a=$(t.getOnePageLI(n));t.$ul.append(a),e.pageIndex=n,e.el=a;var o=new i(e);o.render(),r.splice(n,1,o)}}),this.set("pageNum",r.length)):this.set("data",[]);var a=this.get("arrow");if(a){_.isString(a)&&(a={orient:a,without:[],style:{}});var o=this.arrow=new Fui.Arrow({orient:a.orient,style:a.style||{}});this.arrowWithout=_.isArray(a.without)?"-"+a.without.join("-")+"-":"",this.$el.append(o.$el)}t.ensureLayout();var s=0;setTimeout(function(){i.children().eq(t.get("curPage")).addClass("focus"),e(0)},1)},onGesture:function(e,t,n){var i=this,r=i.get("data"),a=i.get("index"),o=[],s=null,u=t.attr("data-"+e)||"";u=u.split("@");for(var c=0,l=r.length;l>c;c++){s=r[c];var d=!1;s.getGestureItems&&(o=s.getGestureItems()||[]);for(var h=0,f=o.length;f>h;h++){var p=o[h];if(e==p.gesture&&p.name==u[0]&&_.isFunction(p.callback)){p.callback.call(r[c],n,t,u[1]),d=!0;break}}if(d)break}r[a]&&r[a]instanceof Fui.Template&&r[a].onGesture(n,e,t),i.trigger("gesture",[n,e,t])},onFocus:function(){this.get("data")[this.get("curPage")].onFocus()},onBlur:function(){this.get("data")[this.get("curPage")].onBlur()},_doTrans:function(e,t,n){function i(e){return/^[\+|\-]{1}$/.test(e)?e=parseInt(e+a.pageSize[r])+"px":/\%$/.test(e)||(e=parseInt(e)+"px"),["translate3d("+("x"==r?e:"0px"),"y"==r?e:"0px","0px) scale(1) rotate(0deg) skew(0deg,0deg)"].join(",")}var r=this.get("orient"),a=this;"undefined"==typeof n&&(n=!0),e&&1==e.length&&e.css({display:"block",zoom:1,webkitTransform:i(t),webkitTransition:n?"-webkit-transform .4s":"none"})},_transitionEnd:function(e,t){var n=this,i=n.$ul;e.one("webkitTransitionEnd",function(){i.children().eq(t).addClass("focus").siblings("section").removeClass("focus");var e=n.get("data"),r=n.get("prePage"),a=e[t],o=e[r];a&&_.isFunction(a.onFocus)&&a.onFocus(),o&&o!=a&&_.isFunction(o.onBlur)&&o.onBlur(),n.ensureLayout(),n._slide_flag=!1})},toPage:function(e){var t=this,n=t.get("curPage"),i=t.get("pageNum"),r=t.$ul,a=(t.get("orient"),r.children());0>e&&(e=i-1),e>i-1&&(e=0),e>n?(t._doTrans(a.eq(e),"100%",!1),setTimeout(function(){t._doTrans(a.eq(n),"-100%"),t._doTrans(a.eq(e),"0px")},1)):n>e&&(t._doTrans(a.eq(e),"-100%",!1),setTimeout(function(){t._doTrans(a.eq(n),"100%"),t._doTrans(a.eq(e),"0px")},1)),t.set("curPage",e),t.set("prePage",n),t._transitionEnd(a.eq(e),e)},slide:function(e){function t(){var t=a.eq(e);t.css({zIndex:1,opacity:1}).siblings().css({zIndex:0,opacity:0}),i._transitionEnd(t,e)}function n(){var t=i.event._event_cur_dis[u];switch(c){case"=":t>0?i._doTrans(i.$preLi,"-"):i._doTrans(i.$nextLi,"+"),i._doTrans(i.$curLi,"0px");break;case"+":i._doTrans(i.$curLi,"-"),i._doTrans(i.$nextLi,"0");break;case"-":i._doTrans(i.$curLi,"+"),i._doTrans(i.$preLi,"0px")}i._transitionEnd(i.$curLi,e)}var i=this,r=i.$ul,a=r.children(),o=i.get("curPage"),s=i.get("pageNum"),u=i.get("orient"),c=e==o?"=":e>o?"+":"-",l=i.get("slideType");switch(0>e&&(e=s-1),e>s-1&&(e=0),e==o&&(c="="),this.arrow&&(this.arrow instanceof Fui&&this.arrowWithout.indexOf("-"+e+"-")>=0?this.arrow.hide():this.arrow.show()),i.set("prePage",i.get("curPage")),i.set("curPage",e),i._slide_flag=!0,setTimeout(function(){i._slide_flag=!1},400),l){case"fade":t();break;default:n()}},next:function(e){var t=this,n=t.get("curPage");t.slide(n+1,e)},prev:function(e){var t=this.get("curPage");this.slide(t-1,e)},ensure$LI:function(){var e=this,t=e.$ul.children(),n=e.get("curPage"),i=e.get("pageNum"),r=0>n-1?i-1:n-1,a=n+1>i-1?0:n+1;e.$curLi=t.eq(n),i>2&&(e.$preLi=t.eq(r)),i>=2&&(e.$nextLi=t.eq(a)),e.ul_height=e.$ul.height(),e.ul_width=e.$ul.width()},ensureLayout:function(){function e(){i.css({webkitTransition:"opacity .4s ease"}),n.$curLi.css({opacity:1,zIndex:1}).siblings().css({opacity:0,zIndex:0})}function t(){n._doTrans(n.$preLi,"-100%",!1),n._doTrans(n.$curLi,"0px",!1),n._doTrans(n.$nextLi,"100%",!1)}var n=this,i=n.$ul.children(),r=(n.get("orient"),n.get("slideType"));switch(n.ensure$LI(),r){case"fade":e();break;default:t()}},listeners:{gesture:null,touchstart:function(e){function t(){}function n(){}var i=this,r=i.get("slideType");if(e.$e.stopPropagation(),e.$e.preventDefault(),!i._slide_flag)switch(r){case"fade":t();break;default:n()}},touchmove:function(e){function t(){}function n(){s>0?(i._doTrans(i.$nextLi,"100%",!1),i._doTrans(i.$preLi,s-o,!1)):(i._doTrans(i.$preLi,"100%",!1),i._doTrans(i.$nextLi,s+o,!1)),i._doTrans(i.$curLi,s,!1)}e.$e.stopPropagation(),e.$e.preventDefault();var i=this,r=i.event,a=i.get("orient"),o={x:i.ul_width,y:i.ul_height}[a],s=r._event_cur_dis[a],u=i.get("slideType");if(r.checkOrientGesture(a)&&!i._slide_flag)switch(u){case"fade":t();break;default:n()}},touchend:function(e){e.$e.stopPropagation(),e.$e.preventDefault();{var t=this,n=t.event,i=t.get("orient");t.get("slideType")}if(!n.checkOrientGesture(i))return t.slide(t.get("curPage"));if(!t._slide_flag&&!0!==t.get("lock")){if("y"==i)switch(n.gesture){case"upSwipe":t.next(e);break;case"downSwipe":t.prev(e);break;default:t.slide(t.get("curPage"))}if("x"==i)switch(n.gesture){case"leftSwipe":t.next(e);break;case"rightSwipe":t.prev(e);break;default:t.slide(t.get("curPage"))}}}},getOnePageLI:function(e){return Handlebars.compile('<section class="p p{{index}}"></section>')({index:e})},insert:function(e,t){var n=this,i=n.$ul,r=n.get("pageNum")+1,a=n.get("data"),o=Fui.Template[e];if(0>t&&(t=0),t>r&&(t=r),!_.isFunction(o))return error(e+" is not loaded !"),!1;var s=$(n.getOnePageLI(t)),u=new o({pageIndex:t,template:e,el:s[0]});u.render(),0==t?i.prepend(s):s.insertAfter(i.children().eq(t-1));var c=a.slice(0,t),l=a.slice(t);return n.set("data",c.concat([u],l)),n.set("pageNum",r),n.ensureLayout(),u}})}(t.exports,t,e);e.__modules__["86d94571"]=t.exports}(this),function(e){var t={id:"86d94570",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){n.__modules__["86d94571"]}(t.exports,t,e);e.__modules__["86d94570"]=t.exports}(this),function(e){var t={id:"86e10da0",exports:{}};e.__modules__||(e.__modules__={});!function(){Fui.Weixin=FClass.extend({config:{title:null,desc:null,link:String(window.location.href),appid:"",img_url:null,img_width:200,img_height:200},initial:function(){var e=this;document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:"",img_url:e.get("img_url"),img_width:e.get("img_width"),img_height:e.get("img_height"),link:e.get("link"),desc:e.get("desc"),title:e.get("title")},function(){})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{img_url:e.get("img_url"),img_width:e.get("img_width"),img_height:e.get("img_height"),link:e.get("link"),desc:e.get("desc"),title:e.get("title")},function(t){switch(t.err_msg){case"share:timeline:ok":e.trigger("timeline",[!0]);break;case"share:timeline:cancel":e.trigger("timeline",[!1])}})})},!1)}})}(t.exports,t,e);e.__modules__["86e10da0"]=t.exports}(this),function(e){var t={id:"86c82e70",exports:{}};e.__modules__||(e.__modules__={});!function(e,t,n){n.__modules__["86c85580"],n.__modules__["86d1cb60"],n.__modules__["86d8d040"],n.__modules__["86d94570"],n.__modules__["86e10da0"]}(t.exports,t,e);e.__modules__["86c82e70"]=t.exports}(this);